<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Shaka TV LG</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.6/shaka-player.compiled.min.js"></script>
</head>
<body>
    <h1>Player de Vídeo</h1>
    <video id="videoPlayer" width="800" height="450" controls></video>
    <button id="playButton" style="display: none;">Reproduzir</button>
    <p id="errorMsg"></p>
    
    <script>
        async function iniciarShaka() {
            if (!shaka.Player.isBrowserSupported()) {
                document.getElementById("errorMsg").textContent = "Seu navegador não suporta Shaka Player.";
                return;
            }

            const video = document.getElementById("videoPlayer");
            const player = new shaka.Player(video);

            // Configurações de DRM (se necessário)
            player.configure({
                drm: {
                    servers: {
                        'com.widevine.alpha': 'https://widevine-drm-server-url.com',
                        'com.microsoft.playready': 'https://playready-drm-server-url.com'
                    }
                }
            });

            // URL do stream HLS
            const videoUrl = "https://r4---sn-bg0s7nls.c.2mdn.net/videoplayback/id/3e6ea1fd06d0aa10/itag/37/source/web_video_ads/xpc/EgVovf3BOg%3D%3D/ctier/L/acao/yes/ip/0.0.0.0/ipbits/0/expire/1773241578/sparams/acao,ctier,expire,hcs,id,ip,ipbits,itag,met,mh,mip,mm,mn,ms,mv,mvi,pl,rmhost,rms,source,xpc/signature/68A430D206FA2F05288AE8A1B4301AF1715AE3BA.30FAE708B5B598841BFCA82A9FF5F7C548867513/key/cms1/cms_redirect/yes/hcs/ir/met/1741705579,/mh/WT/mip/2804:2140:1000:9900:e460:f388:29da:92fe/mm/42/mn/sn-bg0s7nls/ms/onc/mt/1741705003/mv/m/mvi/4/pl/47/rmhost/r2---sn-bg0s7nls.c.2mdn.net/rms/onc,onc/file/file.mp4";

            try {
                await player.load(videoUrl);
                console.log("Vídeo carregado com sucesso!");
                // Mostra o botão de reprodução
                document.getElementById("playButton").style.display = "block";
            } catch (err) {
                document.getElementById("errorMsg").textContent = "Erro ao carregar o vídeo.";
                console.error("Erro Shaka:", err);
            }
        }

        // Inicia a reprodução quando o botão é clicado
        document.getElementById("playButton").addEventListener("click", () => {
            const video = document.getElementById("videoPlayer");
            video.play().catch((err) => {
                console.error("Erro ao reproduzir o vídeo:", err);
            });
        });

        // Inicializa o Shaka Player quando a página carrega
        document.addEventListener("DOMContentLoaded", iniciarShaka);
    </script>
</body>
</html>
