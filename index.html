<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Shaka TV LG</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.6/shaka-player.compiled.min.js"></script>
</head>
<body>
    <h1>Player de Vídeo</h1>
    <video id="videoPlayer" width="800" height="450" controls></video>
    <button id="playButton" style="display: none;">Reproduzir</button>
    <p id="errorMsg"></p>
    
    <script>
        async function iniciarShaka() {
            if (!shaka.Player.isBrowserSupported()) {
                document.getElementById("errorMsg").textContent = "Seu navegador não suporta Shaka Player.";
                return;
            }

            const video = document.getElementById("videoPlayer");
            const player = new shaka.Player(video);

            // Configurações de DRM (se necessário)
            player.configure({
                drm: {
                    servers: {
                        'com.widevine.alpha': 'https://widevine-drm-server-url.com',
                        'com.microsoft.playready': 'https://playready-drm-server-url.com'
                    }
                }
            });

            // URL do stream HLS
            const videoUrl = "https://live-as-04-13.video.globo.com/j/eyJhbGciOiJSUzUxMiIsImtpZCI6IjEiLCJ0eXAiOiJKV1QifQ.eyJjb3VudHJ5X2NvZGUiOiJCUiIsImRvbWFpbiI6ImxpdmUtYXMtMDQtMTMudmlkZW8uZ2xvYm8uY29tIiwiZXhwIjoxNzQxNjY2OTg4LCJpYXQiOjE3NDE2NTYxODgsImlzcyI6InBsYXliYWNrLWFwaS1wcm9kLWdjcCIsIm93bmVyIjoiNWEyNzAzNjQtYTVkZC00ZTE5LTg1ZGMtNWU1ZmZkNDQ0NWQ3IiwicGF0aCI6Ii9udS9mKGJNYXg9MjI2Mjk3NixpPTIpL2dsb2JvLXZhci9wbGF5bGlzdC5tM3U4In0.IG21Jq3Ls1gSxxAb9pcVD__kpuS2JBfyybDL7rzJeiI8-9DpwLo9TVp8NQgS2aYst0URnKCoCX7g9O6mWDmJ7wEP1lbdYNIBcvfJhd0LSagFRDGDk5znEpIy52UG77COZNn1bEm1jkpapu39x65qUz1S3svM4D7z2zHbbF1xF9RXmISGyeKN11pZFequK0fnEUGj4tuwr70QC2dIWvItFDtLPh2ZAd1cOfPakfOUGUyBvhDwIRgdU3gmVlKz6xUPf9zYp5w1LH8qODSIXa0H03EyAyTJG283N4NdVrQ9ozz1dxXFf5GyTNe10Yi-wtfrA3o1gapwSnxhkLq41-kFwg/nu/f(bMax=2262976,i=2)/globo-var/playlist.m3u8";

            try {
                await player.load(videoUrl);
                console.log("Vídeo carregado com sucesso!");
                // Mostra o botão de reprodução
                document.getElementById("playButton").style.display = "block";
            } catch (err) {
                document.getElementById("errorMsg").textContent = "Erro ao carregar o vídeo.";
                console.error("Erro Shaka:", err);
            }
        }

        // Inicia a reprodução quando o botão é clicado
        document.getElementById("playButton").addEventListener("click", () => {
            const video = document.getElementById("videoPlayer");
            video.play().catch((err) => {
                console.error("Erro ao reproduzir o vídeo:", err);
            });
        });

        // Inicializa o Shaka Player quando a página carrega
        document.addEventListener("DOMContentLoaded", iniciarShaka);
    </script>
</body>
</html>
